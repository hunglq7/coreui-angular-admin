<c-card>
  <c-card-header>
    <app-select-search
      [dsThietbi]="dsBalang"
      [dsDonvi]="dsDonvi"
      (eventSearchThietbi)="eventThietbi($event)"
      (eventSearchDonvi)="eventDonvi($event)"
    ></app-select-search>
    <button (click)="onThemmoi()" nz-button nzType="primary" nzPrimary>
      <span>Thêm</span>
    </button>
    <button (click)="exportexcel()" nz-button nzType="default" nzPrimary>
      Xuất Excel
    </button>
  </c-card-header>
  <c-card-body>
    <nz-table
      cTable
      #columnTable
      nzShowQuickJumper
      nzShowSizeChanger
      [nzData]="listOfBalang"
      [nzScroll]="{ x: '1100px' }"
      [nzPageIndex]="pageIndex"
      [nzPageSize]="pageSize"
      [nzPageSizeOptions]="[3, 5, 10, 20]"
      [nzTotal]="totalRow"
      [nzFrontPagination]="false"
      (nzPageIndexChange)="pageIndexChanged($event)"
      (nzPageSizeChange)="pageSizeChange($event)"
    >
      <thead>
        <tr>
          <th nzLeft scope="col">Thiết bị</th>
          <th scope="col">Đơn vị</th>
          <th scope="col">Ngày lắp</th>
          <th scope="col">Đơn vị tính</th>
          <th scope="col">Số lượng</th>
          <th scope="col">Vị trí lắp đặt</th>
          <th scope="col">Tình trạng kỹ thuật</th>
          <th scope="col">Hành động</th>
        </tr>
      </thead>
      <tbody>
        @for (item of listOfBalang ; track $index) {
        <tr>
          <td nzLeft>{{ item.tenThietBi }}</td>
          <td>{{ item.tenDonVi }}</td>
          <td>{{ item.ngayLap | date : "dd/MM/yyyy" }}</td>
          <td>{{ item.donViTinh }}</td>
          <td>{{ item.soLuong }}</td>
          <td>{{ item.viTriLapDat }}</td>
          <td>{{ item.tinhTrangKyThuat }}</td>
          <td>
            <button
              nz-tooltip
              [nzTooltipTitle]="titleSua"
              [nzTooltipTitleContext]="{ $implicit: 'Icon' }"
              nz-button
              nzType="default"
              [nzSize]="size"
              (click)="onEdit(item.id)"
            >
              <nz-icon nzType="edit" style="color: rgb(16, 142, 233)" />
            </button>
            <ng-template #titleSua let-thing>
              <nz-icon nzType="edit" />
              <span>Sửa bản ghi</span>
            </ng-template>
            <ng-template #titleXoa let-thing>
              <nz-icon nzType="delete" />
              <span>Xóa bản ghi</span>
            </ng-template>

            <button
              nz-tooltip
              [nzTooltipTitle]="titleXoa"
              [nzTooltipTitleContext]="{ $implicit: 'Icon' }"
              nz-button
              nzType="default"
              [nzSize]="size"
              (click)="showConfirm(item)"
            >
              <nz-icon nzType="delete" style="color: rgb(255, 0, 0)" />
            </button>
          </td>
        </tr>
        }
      </tbody>
    </nz-table>
  </c-card-body>
</c-card>

<!-- Model -->

<c-modal
  id="liveDemoModal"
  [visible]="visible"
  (visibleChange)="handleLiveDemoChange($event)"
>
  <c-modal-header>
    <h5 cModalTitle>Modal title</h5>
    <button (click)="toggleLiveDemo()" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>Woohoo, you are reading this text in a modal!</c-modal-body>
  <c-modal-footer>
    <button (click)="toggleLiveDemo()" cButton color="secondary">Close</button>
    <button cButton color="primary">Save changes</button>
  </c-modal-footer>
</c-modal>
